title Get All Users Sequence Diagram

participant Client
participant UserController
participant UserService
participant UserRepository
participant Database

Client->UserController: 1. GET /api/User?page={page}&pageSize={pageSize}&role={role}
activate UserController

UserController->UserService: 2. Call GetAllUsersAsync(page, pageSize, role, cancellationToken)
activate UserService

UserService->UserRepository: 3. GetAllUsersAsync(page, pageSize, role)
activate UserRepository
UserRepository->Database: 4. Query users with pagination and role filter
activate Database
Database-->UserRepository: 5. Return users list and total count
deactivate Database
UserRepository-->UserService: 6. Return (users, totalCount)
deactivate UserRepository

UserService->UserService: 7. Map users to UserResponseDTO list
UserService->UserService: 8. Calculate totalPages = Ceiling(totalCount / pageSize)
UserService->UserService: 9. Create PagedResponse object
UserService->UserService: 10. Set CurrentPage, PageSize, TotalPages, TotalRecords
UserService->UserService: 11. Set HasNextPage = (page < totalPages)
UserService->UserService: 12. Set HasPreviousPage = (page > 1)
UserService-->UserController: 13. Return PagedResponse<UserResponseDTO>
deactivate UserService

UserController->Client: 14. Return 200 OK (PagedResponse)
deactivate UserController

note over Client,Database: Requires Authorization: Admin or Staff role\nSupports pagination and optional role filter
