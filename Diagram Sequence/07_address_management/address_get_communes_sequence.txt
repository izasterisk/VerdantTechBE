title Get Communes By District Sequence Diagram

participant Client
participant AddressUI
participant AddressController
participant AddressService
participant GoshipAddressApiClient
participant GoShipAPI

Client->AddressUI: 1. Request communes list (districtId)
AddressUI->AddressController: 2. GET /api/Address/communes?districtId={districtId}
activate AddressController

AddressController->AddressController: 3. Validate districtId
alt DistrictId is empty
    AddressController->AddressUI: 3.1 Return 400 Bad Request
    deactivate AddressController
else DistrictId is valid
    AddressController->AddressService: 3.2 Call GetCommunesAsync(districtId)
    activate AddressService

    AddressService->GoshipAddressApiClient: 4. GoshipGetCommunesAsync(districtId)
    activate GoshipAddressApiClient
    GoshipAddressApiClient->GoShipAPI: 5. HTTP GET /communes?districtId={districtId}
    GoShipAPI-->GoshipAddressApiClient: 6. Return communes list
    GoshipAddressApiClient-->AddressService: 7. Return List<CourierCommuneResponseDTO>
    deactivate GoshipAddressApiClient

    AddressService-->AddressController: 8. Return communes list
    deactivate AddressService

    AddressController->AddressUI: 9. Return 200 OK (APIResponse with communes)
    deactivate AddressController
    AddressUI->Client: 10. Display communes list
end
