title Get All Export Inventories Sequence Diagram

participant Staff
participant InventoryUI
participant ExportInventoryController
participant ExportInventoryService
participant ExportInventoryRepository
participant Database

Staff->InventoryUI: 1. Request export inventories list (page, pageSize, movementType)
InventoryUI->ExportInventoryController: 2. GET /api/ExportInventory?page={page}&pageSize={pageSize}&movementType={movementType}
activate ExportInventoryController

note over ExportInventoryController: Requires Authorization (Admin/Staff)

ExportInventoryController->ExportInventoryController: 3. Validate pagination parameters
alt Invalid Parameters
    ExportInventoryController->InventoryUI: 4.1 Return 400 Bad Request
    InventoryUI->Staff: 5.1 Show error message
    deactivate ExportInventoryController
else Valid Parameters
    ExportInventoryController->ExportInventoryService: 4.2 Call GetAllExportInventoriesAsync(page, pageSize, movementType)
    activate ExportInventoryService
    
    ExportInventoryService->ExportInventoryRepository: 5.2 GetAllExportInventoriesAsync(page, pageSize, movementType)
    activate ExportInventoryRepository
    ExportInventoryRepository->Database: 6.2 Get export inventories list with filter and pagination
    Database-->ExportInventoryRepository: 7.2 Return export inventories list and total count
    ExportInventoryRepository-->ExportInventoryService: 8.2 Return (exportInventories, totalCount)
    deactivate ExportInventoryRepository
    ExportInventoryService->ExportInventoryService: 9.2 Calculate pagination info
    ExportInventoryService-->ExportInventoryController: 10.2 Return success (PagedResponse<ExportInventoryResponseDTO>)
    deactivate ExportInventoryService
    ExportInventoryController->InventoryUI: 11.2 Return 200 OK (PagedResponse<ExportInventoryResponseDTO>)
    deactivate ExportInventoryController
    InventoryUI->Staff: 12.2 Display export inventories list with pagination
end

