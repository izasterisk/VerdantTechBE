title Get Product Registrations By Vendor Sequence Diagram

participant Client
participant ProductRegistrationUI
participant ProductRegistrationsController
participant ProductRegistrationService
participant ProductRegistrationRepository
participant Database

Client->ProductRegistrationUI: 1. Request product registrations list (vendorId, page, pageSize)
ProductRegistrationUI->ProductRegistrationsController: 2. GET /api/ProductRegistrations/vendor/{vendorId}?page={page}&pageSize={pageSize}
activate ProductRegistrationsController

ProductRegistrationsController->ProductRegistrationService: 3. Call GetByVendorAsync(vendorId, page, pageSize)
activate ProductRegistrationService

ProductRegistrationService->ProductRegistrationRepository: 4. GetByVendorAsync(vendorId, page, pageSize)
activate ProductRegistrationRepository
ProductRegistrationRepository->Database: 5. Get product registrations by vendorId with pagination
Database-->ProductRegistrationRepository: 6. Return (List<ProductRegistration>, total)
ProductRegistrationRepository-->ProductRegistrationService: 7. Return (items, total)
deactivate ProductRegistrationRepository

ProductRegistrationService->ProductRegistrationService: 8. Map entities to DTOs (AutoMapper)
ProductRegistrationService->ProductRegistrationService: 9. HydrateMediaAsync(dtos) - Load images and certificates
ProductRegistrationService->ProductRegistrationService: 10. Calculate pagination info
ProductRegistrationService-->ProductRegistrationsController: 11. Return PagedResponse<ProductRegistrationReponseDTO>
deactivate ProductRegistrationService

ProductRegistrationsController->ProductRegistrationUI: 12. Return 200 OK (PagedResponse)
deactivate ProductRegistrationsController
ProductRegistrationUI->Client: 13. Display product registrations list with pagination
end

