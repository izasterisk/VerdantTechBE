title Get Product Category By ID Sequence Diagram

participant Client
participant ProductCategoryController
participant ProductCategoryService
participant ProductCategoryRepository
participant Database

Client->ProductCategoryController: 1. GET /api/ProductCategory/{id}
activate ProductCategoryController

ProductCategoryController->ProductCategoryService: 2. Call GetProductCategoryByIdAsync(id, cancellationToken)
activate ProductCategoryService

ProductCategoryService->ProductCategoryRepository: 3. GetProductCategoryByIdAsync(id, useNoTracking: true)
activate ProductCategoryRepository
ProductCategoryRepository->Database: 4. Query category by ID with Parent relation
activate Database
Database-->ProductCategoryRepository: 5. Return category or null
deactivate Database
ProductCategoryRepository-->ProductCategoryService: 6. Return ProductCategory or null
deactivate ProductCategoryRepository

alt Category Not Found
    ProductCategoryService-->ProductCategoryController: 7a. Return null
    deactivate ProductCategoryService
    ProductCategoryController->Client: 8a. Return 404 Not Found
    deactivate ProductCategoryController
else Category Found
    ProductCategoryService->ProductCategoryService: 7b. Map ProductCategory to ProductCategoryResponseDTO
    ProductCategoryService-->ProductCategoryController: 8b. Return ProductCategoryResponseDTO
    deactivate ProductCategoryService
    ProductCategoryController->Client: 9b. Return 200 OK (ProductCategoryResponseDTO)
    deactivate ProductCategoryController
end
